# 修订记录

<table>
<tbody>
<tr>
<td>修订版本</td>
<td>修订日期</td>
<td>修订说明</td>
</tr>
<tr>
<td>001</td>
<td>2025-08-19</td>
<td>初始版本</td>
</tr>
<tr>
<td>002</td>
<td>2025-09-09</td>
<td>添加配置文件说明</td>
</tr>
<tr>
<td>003</td>
<td>2025-09-15</td>
<td>添加一些测试用例</td>
</tr>
</tbody>
</table>

---

# 1. 概述

K1 OH5.0 设备在研发及生产阶段，使用 FactoryTest 应用进行硬件与系统功能的专项测试。

# 2. 支持测试项

<table>
<tbody>
<tr>
<td>一级测试项</td>
<td>二级测试项</td>
<td>测试编号</td>
<td>测试项说明</td>
</tr>
<tr>
<td rowspan=7 colspan=1>UI测试</td>
<td>菜单滑动测试</td>
<td>0-0</td>
<td>测试菜单能否正常流畅的滑动</td>
</tr>
<tr>
<td>手动缩放测试</td>
<td>0-1</td>
<td>测试图形能否正常流畅缩放</td>
</tr>
<tr>
<td>填充测试</td>
<td>0-7</td>
<td>测试图形能否填充对应的颜色</td>
</tr>
<tr>
<td>线框测试</td>
<td>0-8</td>
<td>测试线框能否正常设置粗细</td>
</tr>
<tr>
<td>透明度测试</td>
<td>0-15</td>
<td>测试图形能否正常设置透明度</td>
</tr>
<tr>
<td>阴影测试</td>
<td>0-18</td>
<td>测试图形能否正常生成阴影</td>
</tr>
<tr>
<td>进度条测试</td>
<td>0-28</td>
<td>测试进度条控件能否正常操作</td>
</tr>
<tr>
<td rowspan=2 colspan=1>音频测试<br/></td>
<td>音频输入测试（Codec&3.5mm耳机）</td>
<td>1-0</td>
<td>测试通过mic或者耳机进行录音的功能</td>
</tr>
<tr>
<td>音频输出测试（Codec&3.5mm耳机）</td>
<td>1-2</td>
<td>测试通过喇叭或者耳机进行播放的功能</td>
</tr>
<tr>
<td rowspan=2 colspan=1>相机测试</td>
<td>相机预览测试</td>
<td>2-0</td>
<td>测试前后摄像头，不同分辨率下的预览效果</td>
</tr>
<tr>
<td>闪光灯测试</td>
<td>2-2</td>
<td>测试闪光灯能否正常工作</td>
</tr>
<tr>
<td rowspan=2 colspan=1>播放测试</td>
<td>播放音频</td>
<td>3-0</td>
<td>测试音乐能否正常播放，跳播</td>
</tr>
<tr>
<td>播放视频</td>
<td>3-1</td>
<td>测试视频能否正常播放，跳播</td>
</tr>
<tr>
<td rowspan=6 colspan=1>传感器测试</td>
<td>加速度传感器测试</td>
<td>5-0</td>
<td>测试加速度传感器能否正常工作</td>
</tr>
<tr>
<td>加速度传感器（未校准）测试</td>
<td>5-1</td>
<td>测试加速度传感器（未校准）能否正常工作</td>
</tr>
<tr>
<td>重力传感器测试</td>
<td>5-3</td>
<td>测试重力传感器能否正常工作</td>
</tr>
<tr>
<td>陀螺仪测试</td>
<td>5-4</td>
<td>测试陀螺仪能否正常工作</td>
</tr>
<tr>
<td>陀螺仪（未校准）测试</td>
<td>5-5</td>
<td>测试陀螺仪（未校准）能否正常工作</td>
</tr>
<tr>
<td>接近光感器测试</td>
<td>5-12</td>
<td>测试接近光感器能否正常工作</td>
</tr>
<tr>
<td rowspan=2 colspan=1>屏幕测试</td>
<td>屏幕亮度测试</td>
<td>6-1</td>
<td>测试屏幕亮度能否调节</td>
</tr>
<tr>
<td>屏幕触摸测试</td>
<td>6-3</td>
<td>测试屏幕触摸是否准确灵敏</td>
</tr>
<tr>
<td rowspan=3 colspan=1>输入测试</td>
<td>输入监控测试</td>
<td>7-0</td>
<td>测试输入触摸点是否准确</td>
</tr>
<tr>
<td>键盘测试</td>
<td>7-1</td>
<td>测试键盘能否正常工作</td>
</tr>
<tr>
<td>按键测试</td>
<td>7-2</td>
<td>测试外部实体按键是否正常工作</td>
</tr>
<tr>
<td rowspan=2 colspan=1>电源测试</td>
<td>休眠测试</td>
<td>8-0</td>
<td>测试设备能否正常熄屏</td>
</tr>
<tr>
<td>充电测试</td>
<td>8-1</td>
<td>测试设备能否正常充电</td>
</tr>
<tr>
<td>Wifi测试</td>
<td>Wifi扫描测试</td>
<td>10-0</td>
<td>测试wifi能否正常扫描并连接</td>
</tr>
<tr>
<td rowspan=4 colspan=1>接口测试</td>
<td>USB接口测试</td>
<td>13-0</td>
<td>测试U盘能否正常识别挂载</td>
</tr>
<tr>
<td>以太网接口测试</td>
<td>13-1</td>
<td>测试以太网能否正常连接</td>
</tr>
<tr>
<td>TF卡接口测试</td>
<td>13-2</td>
<td>测试TF卡能否正常识别挂载</td>
</tr>
<tr>
<td>震动马达测试</td>
<td>13-3</td>
<td>测试震动马达能否正常工作</td>
</tr>
<tr>
<td rowspan=3 colspan=1>老化测试</td>
<td>综合老化测试</td>
<td>14-0</td>
<td>视频播放+Camera预览+UI的老化测试</td>
</tr>
<tr>
<td>重启老化测试</td>
<td>14-1</td>
<td>多次重启老化</td>
</tr>
<tr>
<td>休眠唤醒老化测试</td>
<td>14-2</td>
<td>多次休眠唤醒</td>
</tr>
</tbody>
</table>

# 3. 配置文件

## 3.1. 配置文件说明

配置文件用于定义需启用的测试项及相关测试参数，文件路径为 `/system/etc/factorytest_config.json`，示例如下：

```json
{
  "first_menu": [0,1,2,3,5,6,7,8,10,13,14],    //一级菜单开启项
  "ArkUI_menu": [0,1,7,8,15,18,28],            //UI测试开启项
  "Audio_menu": [0,2],                         //音频测试开启项
  "Camera_menu": [0,2],                        //相机测试开启项
  "Player_menu": [0,1],                        //播放测试开启项
  "Sensor_menu": [0,1,3,4,5,12],               //传感器测试开启项
  "Screen_menu": [1,3],                        //屏幕测试开启项
  "MultimodalInput_menu": [0,1,2],             //输入测试开启项
  "Power_menu": [0,1],                         //电源测试开启项
  "Wifi_menu": [0],                            //Wifi测试开启项
  "Interface_menu": [0,1,2,3],                 //接口测试开启项
  "Aging_menu": [0,1],                         //老化测试开启项
  "reboot_times": 5000,                        //重启老化次数设置
  "_comment": ["xxx"]                          //注释
}
```

## 3.2. 修改配置文件

### 3.2.1. 直接修改设备内的配置文件

通过 `hdc` 将 `/system/etc/factorytest_config.json` 文件拉取至本地，修改完成后再推回设备。

```shell
# mount -o remount,rw /
# exit

D:\>hdc file recv /system/etc/factorytest_config.json
FileTransfer finish, Size:4124, File count = 1, time:8ms rate:515.50kB/s

...
修改factorytest_config.json
...

D:\>hdc file send factorytest_config.json /system/etc/
FileTransfer finish, Size:4124, File count = 1, time:11ms rate:374.91kB/s

D:\>
```

### 3.2.2. 修改源文件打包生成 img

修改 `/vendor/spacemit/xxx/etc/factorytest_config.json` 源文件后，重新编译并打包生成固件镜像。

# 4. 使用方法

# 5. FAQ

## 5.1.
